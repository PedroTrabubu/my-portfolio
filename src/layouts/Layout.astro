---
// Layout.astro (solo la parte relevante)
import "../styles/global.css";
import "@fontsource-variable/inter";
import Header from "../components/Header.astro";

interface Props {
  title?: string;
  description?: string;
}
const { title = "Mi portfolio", description = "" } = Astro.props;
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <!-- Aplica el tema lo antes posible para evitar flash -->
    <script is:inline>
      (function () {
        try {
          const stored = localStorage.getItem("theme"); // "light" | "dark" | "system" | null
          const prefersDark =
            window.matchMedia &&
            window.matchMedia("(prefers-color-scheme: dark)").matches;
          const theme = stored || "system";
          const isDark =
            theme === "dark" || (theme === "system" && prefersDark);
          document.documentElement.classList.toggle("dark", isDark);
        } catch (e) {
          /* ignore */
        }
      })();
    </script>
  </head>

  <body class="relative">
    <!-- Fondo Ãºnico que cambia con dark: -->
    <div
      class="absolute inset-0 z-[-2] bg-white dark:bg-neutral-950
             bg-[radial-gradient(100%_50%_at_50%_0%,rgba(0,163,255,0.13)_0,rgba(0,163,255,0)_50%,rgba(0,163,255,0)_100%)]
             dark:bg-[radial-gradient(ellipse_80%_80%_at_50%_-20%,rgba(120,119,198,0.3),rgba(255,255,255,0))]
             transition-colors duration-300"
    >
    </div>

    <Header />

    <main class="flex-grow max-w-6xl w-full mx-auto p-4">
      <slot />
    </main>
  </body>
</html>
